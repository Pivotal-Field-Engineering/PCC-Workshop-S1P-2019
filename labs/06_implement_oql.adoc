## Implement Cloud Cache Native querying for retrieving data

Cloud Cache is primarily a key-value store with additional capability of querying the stored java objects using sql-like query engine called Object Query Language (OQL). In this section we'll implement OQL for retrieving pizza orders using email address of customers and also demonstrate use of indexes for improving the query resposne time.

***Step 1:*** Lets implement an OQL query for retrieving orders from /Pizza region using @query annotation. We can use @query annotation for executing custom queries in repositories. We need to make below changes in PizzaRepository.java

```
@Query("SELECT * FROM /Pizza p WHERE p.sauce.name = $1" )
List<Pizza> findPizzasBySauceType(String sauce);
```

***Step 2:*** Implement api for searching orders in AppController.java

```
@GetMapping("/orders/{sauce}")
public String getPizzasBySauceType(@PathVariable("sauce") String sauce) {

	List<Pizza> pizzaObjects = pizzaRepository.findPizzasBySauceType(sauce);
	
	StringBuilder result = new StringBuilder();
    if (pizzaObjects != null && pizzaObjects.size() > 0) {

    	pizzaObjects.forEach(item -> result.append(item + "</br>"));

    	return String.format("Result [<b>%1$s</b>] <br/>", result.toString());
    }
	return "No Results Found.";
}
```

***Step 3:*** Rebuild and push the app

***Step 4:*** Query the order using /orders endpoint

- `GET /orders/{sauce}`
     
    Returns the pizza with given sauce in JSON form.
    Returns "Pizza \[name\] Not Found"
    if no pizza with the given sauce exists.

    ```
    curl -k https://APP-URL/orders/pesto
    ```
